[{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\api.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\components\\Footer.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\components\\Layout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\components\\Navbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\components\\ProjectCard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'isFeatured' is defined but never used.","line":7,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":58,"suggestions":[{"messageId":"removeVar","data":{"varName":"isFeatured"},"fix":{"range":[286,298],"text":""},"desc":"Remove unused variable 'isFeatured'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { ThumbsUp, MessageSquare, Star, Users, X, Heart, Share2, Clock, TrendingUp, Send } from 'lucide-react';\r\nimport { api } from '../api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\n\r\nexport default function ProjectCard({ project, isFeatured, isSponsored, isOwner }) {\r\n    const { currentUser } = useAuth();\r\n    const [showApplyModal, setShowApplyModal] = useState(false);\r\n    const [note, setNote] = useState('');\r\n\r\n    // Social State\r\n    const [likes, setLikes] = useState(project.likes || 0);\r\n    const [isLiked, setIsLiked] = useState(false); // Ideally this comes from API\r\n    const [showComments, setShowComments] = useState(false);\r\n    const [comments, setComments] = useState([]);\r\n    const [loadingComments, setLoadingComments] = useState(false);\r\n    const [newComment, setNewComment] = useState('');\r\n\r\n    const handleLike = async (e) => {\r\n        e.preventDefault();\r\n        if (!currentUser) return alert('Please login to like projects');\r\n\r\n        // Optimistic update\r\n        const prevLikes = likes;\r\n        const prevIsLiked = isLiked;\r\n        setLikes(prev => prevIsLiked ? prev - 1 : prev + 1);\r\n        setIsLiked(!prevIsLiked);\r\n\r\n        try {\r\n            const res = await api.projects.toggleLike(project.id);\r\n            setLikes(res.likes);\r\n            setIsLiked(res.liked);\r\n        } catch (err) {\r\n            // Revert\r\n            setLikes(prevLikes);\r\n            setIsLiked(prevIsLiked);\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    const toggleComments = async (e) => {\r\n        e.preventDefault();\r\n        if (!showComments) {\r\n            setLoadingComments(true);\r\n            try {\r\n                const data = await api.projects.getComments(project.id);\r\n                setComments(data);\r\n            } catch (err) {\r\n                console.error(err);\r\n            } finally {\r\n                setLoadingComments(false);\r\n            }\r\n        }\r\n        setShowComments(!showComments);\r\n    };\r\n\r\n    const handleAddComment = async (e) => {\r\n        e.preventDefault();\r\n        if (!currentUser) return alert('Please login to comment');\r\n        if (!newComment.trim()) return;\r\n\r\n        try {\r\n            const comment = await api.projects.addComment(project.id, newComment);\r\n            setComments([comment, ...comments]);\r\n            setNewComment('');\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert('Failed to post comment');\r\n        }\r\n    };\r\n\r\n    const handleApply = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const { api } = await import('../api');\r\n            await api.requests.create({\r\n                projectId: project.id,\r\n                role: 'Collaborator', // Default role or add a selector\r\n                note: note\r\n            });\r\n            alert('Application sent successfully!');\r\n            setShowApplyModal(false);\r\n            setNote('');\r\n        } catch (error) {\r\n            console.error('Failed to apply:', error);\r\n            alert('Failed to send application. Please try again.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className={`bg-[#13161f] rounded-xl overflow-hidden group relative hover:bg-white/5 transition-all duration-300 ${isSponsored ? 'ring-1 ring-primary/20' : ''}`}>\r\n                {isSponsored && (\r\n                    <div className=\"absolute top-0 right-0 bg-gradient-to-l from-primary/20 to-transparent px-3 py-1 rounded-bl-xl\">\r\n                        <span className=\"text-xs font-bold text-primary uppercase tracking-wider flex items-center gap-1\">\r\n                            <TrendingUp className=\"w-3 h-3\" /> Featured\r\n                        </span>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"p-6\">\r\n                    <div className=\"flex justify-between items-start mb-4\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center text-white font-bold shadow-inner border border-white/5\">\r\n                                {project.owner_name ? project.owner_name.charAt(0).toUpperCase() : 'U'}\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-lg font-bold text-gray-100 group-hover:text-primary transition-colors line-clamp-1\">{project.title}</h3>\r\n                                <p className=\"text-xs text-gray-500\">{new Date(project.created_at).toLocaleDateString()}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex space-x-2\">\r\n                            {isOwner && (\r\n                                <button className=\"text-gray-500 hover:text-white transition-colors\">\r\n                                    {/* Edit icon placeholder */}\r\n                                    Edit\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <p className=\"text-gray-400 text-sm mb-6 line-clamp-2 h-10 leading-relaxed\">\r\n                        {project.description}\r\n                    </p>\r\n\r\n                    <div className=\"flex flex-wrap gap-2 mb-6\">\r\n                        <span className=\"px-2 py-1 rounded-md bg-white/5 text-xs font-medium text-gray-300 border border-white/5\">\r\n                            {project.category}\r\n                        </span>\r\n                        <span className=\"px-2 py-1 rounded-md bg-white/5 text-xs font-medium text-gray-300 border border-white/5\">\r\n                            {project.status}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between pt-4 border-t border-white/5\">\r\n                        <div className=\"flex space-x-4 text-gray-500\">\r\n                            <button\r\n                                onClick={handleLike}\r\n                                className={`flex items-center space-x-1 hover:text-pink-500 transition-colors group/like ${isLiked ? 'text-pink-500' : ''}`}\r\n                            >\r\n                                <Heart className={`h-4 w-4 ${isLiked ? 'fill-current' : 'group-hover/like:fill-current'}`} />\r\n                                <span className=\"text-xs\">{likes}</span>\r\n                            </button>\r\n                            <button\r\n                                onClick={toggleComments}\r\n                                className=\"flex items-center space-x-1 hover:text-primary transition-colors\"\r\n                            >\r\n                                <MessageSquare className=\"h-4 w-4\" />\r\n                                <span className=\"text-xs\">{comments.length || project.comments_count || 0}</span>\r\n                            </button>\r\n                        </div>\r\n\r\n                        {isOwner ? (\r\n                            <span className=\"text-xs font-medium text-gray-500 bg-white/5 px-3 py-1.5 rounded-full\">\r\n                                Your Project\r\n                            </span>\r\n                        ) : (\r\n                            <button\r\n                                onClick={() => setShowApplyModal(true)}\r\n                                className=\"text-sm font-medium text-primary hover:text-white transition-colors flex items-center gap-1 group/btn\"\r\n                            >\r\n                                I'm Interested\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                {/* Comments Section */}\r\n                {showComments && (\r\n                    <div className=\"bg-black/20 border-t border-white/5 p-4\">\r\n                        <div className=\"mb-4 max-h-60 overflow-y-auto space-y-3 custom-scrollbar\">\r\n                            {loadingComments ? (\r\n                                <p className=\"text-xs text-gray-500 text-center\">Loading comments...</p>\r\n                            ) : comments.length > 0 ? (\r\n                                comments.map(comment => (\r\n                                    <div key={comment.id} className=\"flex gap-3\">\r\n                                        <div className=\"h-6 w-6 rounded-full bg-gray-700 flex-shrink-0 overflow-hidden\">\r\n                                            {comment.photo_url ? (\r\n                                                <img src={comment.photo_url} alt={comment.username} className=\"h-full w-full object-cover\" />\r\n                                            ) : (\r\n                                                <div className=\"h-full w-full flex items-center justify-center text-[10px] text-white font-bold\">\r\n                                                    {comment.username ? comment.username.charAt(0).toUpperCase() : 'U'}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <div className=\"bg-white/5 rounded-lg rounded-tl-none p-2 text-xs\">\r\n                                                <span className=\"font-bold text-gray-300 mr-2\">{comment.username}</span>\r\n                                                <span className=\"text-gray-400\">{comment.content}</span>\r\n                                            </div>\r\n                                            <span className=\"text-[10px] text-gray-600 ml-1\">{new Date(comment.created_at).toLocaleDateString()}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                ))\r\n                            ) : (\r\n                                <p className=\"text-xs text-gray-500 text-center\">No comments yet. Be the first!</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {currentUser && (\r\n                            <form onSubmit={handleAddComment} className=\"flex gap-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={newComment}\r\n                                    onChange={(e) => setNewComment(e.target.value)}\r\n                                    placeholder=\"Write a comment...\"\r\n                                    className=\"flex-1 bg-white/5 border border-white/10 rounded-full px-3 py-1.5 text-xs text-white focus:outline-none focus:border-primary/50\"\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={!newComment.trim()}\r\n                                    className=\"p-1.5 rounded-full bg-primary text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-primary-hover transition-colors\"\r\n                                >\r\n                                    <Send className=\"h-3 w-3\" />\r\n                                </button>\r\n                            </form>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Apply Modal */}\r\n            {\r\n                showApplyModal && (\r\n                    <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n                        <div className=\"bg-[#13161f] rounded-2xl max-w-md w-full p-6 shadow-2xl border border-white/10 transform transition-all\">\r\n                            <h3 className=\"text-xl font-bold text-white mb-2\">Apply to {project.title}</h3>\r\n                            <p className=\"text-gray-400 text-sm mb-6\">\r\n                                Let the project owner know why you'd be a great fit.\r\n                            </p>\r\n\r\n                            <textarea\r\n                                className=\"w-full bg-dark border border-white/10 rounded-xl p-4 text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 mb-4 resize-none h-32\"\r\n                                placeholder=\"I have experience with...\"\r\n                                value={note}\r\n                                onChange={(e) => setNote(e.target.value)}\r\n                            />\r\n\r\n                            <div className=\"flex justify-end space-x-3\">\r\n                                <button\r\n                                    onClick={() => setShowApplyModal(false)}\r\n                                    className=\"px-4 py-2 text-gray-400 hover:text-white font-medium transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleApply}\r\n                                    className=\"bg-primary text-white px-6 py-2 rounded-full font-bold hover:bg-primary-hover transition-colors shadow-lg shadow-primary/20\"\r\n                                >\r\n                                    Send Application\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\context\\AuthContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":6,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":6,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { api } from '../api';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuth() {\r\n    return useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const checkUser = async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (token) {\r\n                try {\r\n                    const user = await api.auth.me();\r\n                    setCurrentUser(user);\r\n                } catch (err) {\r\n                    console.error(err);\r\n                    localStorage.removeItem('token');\r\n                }\r\n            }\r\n            setLoading(false);\r\n        };\r\n        checkUser();\r\n    }, []);\r\n\r\n    const login = async (email, password) => {\r\n        const data = await api.auth.login({ email, password });\r\n        localStorage.setItem('token', data.token);\r\n        setCurrentUser(data.user);\r\n    };\r\n\r\n    const register = async (username, email, password) => {\r\n        const data = await api.auth.register({ username, email, password });\r\n        localStorage.setItem('token', data.token);\r\n        setCurrentUser(data.user);\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        setCurrentUser(null);\r\n    };\r\n\r\n    const value = {\r\n        currentUser,\r\n        login,\r\n        register,\r\n        logout,\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\firebase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\pages\\Chat.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'navigate' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":9,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"navigate"},"fix":{"range":[412,443],"text":""},"desc":"Remove unused variable 'navigate'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Send, ArrowLeft, User, Users, MoreVertical, Trash2 } from 'lucide-react';\r\nimport { api } from '../api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function Chat() {\r\n    const { requestId } = useParams(); // requestId here acts as projectId or 'all'\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n\r\n    const [rooms, setRooms] = useState([]);\r\n    const [selectedRoom, setSelectedRoom] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n    const [showMembersModal, setShowMembersModal] = useState(false);\r\n    const [members, setMembers] = useState([]);\r\n    const [isPremium, setIsPremium] = useState(false);\r\n    const [editingMessage, setEditingMessage] = useState(null);\r\n    const [editContent, setEditContent] = useState('');\r\n    const fileInputRef = useRef(null);\r\n\r\n    const messagesEndRef = useRef(null);\r\n\r\n    // Fetch Rooms on Mount\r\n    useEffect(() => {\r\n        const fetchRooms = async () => {\r\n            try {\r\n                const [roomsData, userData] = await Promise.all([\r\n                    api.chat.getRooms(),\r\n                    api.auth.me()\r\n                ]);\r\n                setRooms(roomsData);\r\n                setIsPremium(userData.is_premium);\r\n\r\n                // Auto-select room if requestId is a number (projectId)\r\n                if (requestId && requestId !== 'all' && !isNaN(requestId)) {\r\n                    const room = roomsData.find(r => r.id === parseInt(requestId));\r\n                    if (room) setSelectedRoom(room);\r\n                }\r\n            } catch (error) {\r\n                console.error('Failed to fetch data:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchRooms();\r\n    }, [requestId]);\r\n\r\n    // Fetch Messages & Members when Room Changes\r\n    useEffect(() => {\r\n        if (!selectedRoom) return;\r\n\r\n        const fetchMessages = async () => {\r\n            try {\r\n                const data = await api.messages.getProjectMessages(selectedRoom.id);\r\n                setMessages(data);\r\n            } catch (error) {\r\n                console.error('Failed to fetch messages:', error);\r\n            }\r\n        };\r\n\r\n        const fetchMembers = async () => {\r\n            try {\r\n                const data = await api.chat.getMembers(selectedRoom.id);\r\n                setMembers(data);\r\n            } catch (error) {\r\n                console.error('Failed to fetch members:', error);\r\n            }\r\n        };\r\n\r\n        fetchMessages();\r\n        fetchMembers();\r\n\r\n        const interval = setInterval(fetchMessages, 3000);\r\n        return () => clearInterval(interval);\r\n    }, [selectedRoom]);\r\n\r\n    useEffect(() => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [messages]);\r\n\r\n    const handleSend = async (e) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || !selectedRoom) return;\r\n\r\n        try {\r\n            await api.messages.send({ projectId: selectedRoom.id, content: newMessage });\r\n            setNewMessage('');\r\n            // Optimistic update handled by poll or re-fetch\r\n        } catch (error) {\r\n            console.error('Failed to send message:', error);\r\n            alert('Failed to send message');\r\n        }\r\n    };\r\n\r\n    const handleImageUpload = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n\r\n        if (!isPremium) {\r\n            alert('Image sending is a Premium feature.');\r\n            return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onloadend = async () => {\r\n            try {\r\n                await api.messages.send({\r\n                    projectId: selectedRoom.id,\r\n                    content: 'Sent an image',\r\n                    image_url: reader.result\r\n                });\r\n            } catch (error) {\r\n                console.error('Failed to send image:', error);\r\n                alert('Failed to send image');\r\n            }\r\n        };\r\n        reader.readAsDataURL(file);\r\n    };\r\n\r\n    const handleEdit = async (e) => {\r\n        e.preventDefault();\r\n        if (!editContent.trim() || !editingMessage) return;\r\n\r\n        try {\r\n            await api.messages.edit(editingMessage.id, editContent);\r\n            setMessages(prev => prev.map(m => m.id === editingMessage.id ? { ...m, content: editContent, is_edited: true } : m));\r\n            setEditingMessage(null);\r\n            setEditContent('');\r\n        } catch (error) {\r\n            console.error('Failed to edit message:', error);\r\n            alert(error.message || 'Failed to edit message');\r\n        }\r\n    };\r\n\r\n    const startEditing = (msg) => {\r\n        setEditingMessage(msg);\r\n        setEditContent(msg.content);\r\n    };\r\n\r\n    const handleRemoveMember = async (userId) => {\r\n        if (!confirm('Are you sure you want to remove this member?')) return;\r\n        try {\r\n            await api.chat.removeMember(selectedRoom.id, userId);\r\n            setMembers(prev => prev.filter(m => m.user_id !== userId));\r\n            alert('Member removed');\r\n        } catch (error) {\r\n            console.error('Failed to remove member:', error);\r\n            alert('Failed to remove member');\r\n        }\r\n    };\r\n\r\n    const isOwner = selectedRoom?.user_id === currentUser?.id;\r\n\r\n    if (loading) return <div className=\"flex items-center justify-center h-screen\">Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"flex h-[calc(100vh-64px)] bg-dark\">\r\n            {/* Sidebar - Rooms List */}\r\n            <div className={`w-full md:w-80 bg-dark-surface border-r border-white/5 flex-col ${selectedRoom ? 'hidden md:flex' : 'flex'}`}>\r\n                <div className=\"p-4 border-b border-white/5\">\r\n                    <h2 className=\"text-lg font-bold text-white\">Your Projects</h2>\r\n                </div>\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    {rooms.length === 0 ? (\r\n                        <div className=\"p-4 text-gray-500 text-center text-sm\">No active projects yet.</div>\r\n                    ) : (\r\n                        rooms.map(room => (\r\n                            <div\r\n                                key={room.id}\r\n                                onClick={() => setSelectedRoom(room)}\r\n                                className={`p-4 border-b border-white/5 cursor-pointer hover:bg-white/5 transition-colors ${selectedRoom?.id === room.id ? 'bg-primary/10 border-l-4 border-l-primary' : ''}`}\r\n                            >\r\n                                <h3 className=\"font-semibold text-gray-200 truncate\">{room.title}</h3>\r\n                                <p className=\"text-xs text-gray-500 mt-1 truncate\">{room.my_role}</p>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Chat Area */}\r\n            <div className={`flex-1 flex-col bg-dark ${!selectedRoom ? 'hidden md:flex' : 'flex'}`}>\r\n                {selectedRoom ? (\r\n                    <>\r\n                        {/* Header */}\r\n                        <div className=\"bg-dark-surface border-b border-white/5 px-6 py-3 flex justify-between items-center shadow-sm\">\r\n                            <div>\r\n                                <div className=\"flex items-center\">\r\n                                    <button onClick={() => setSelectedRoom(null)} className=\"md:hidden mr-2 text-gray-400\">\r\n                                        <ArrowLeft className=\"h-5 w-5\" />\r\n                                    </button>\r\n                                    <h2 className=\"text-xl font-bold text-white truncate max-w-[200px]\">{selectedRoom.title}</h2>\r\n                                </div>\r\n                                <p className=\"text-xs text-gray-400\">{members.length} Members</p>\r\n                            </div>\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <button\r\n                                    onClick={() => setShowMembersModal(true)}\r\n                                    className=\"p-2 text-gray-400 hover:bg-white/5 hover:text-white rounded-full transition-colors\"\r\n                                    title=\"View Members\"\r\n                                >\r\n                                    <Users className=\"h-5 w-5\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Messages */}\r\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-4 bg-dark\">\r\n                            {messages.length === 0 ? (\r\n                                <div className=\"text-center text-gray-500 mt-10\">\r\n                                    <p>Welcome to the project room!</p>\r\n                                    <p className=\"text-sm\">Start discussing your ideas.</p>\r\n                                </div>\r\n                            ) : (\r\n                                messages.map((msg, idx) => {\r\n                                    const isMe = msg.sender_id === currentUser?.id;\r\n                                    return (\r\n                                        <div key={idx} className={`flex ${isMe ? 'justify-end' : 'justify-start'}`}>\r\n                                            <div className={`flex max-w-[70%] ${isMe ? 'flex-row-reverse' : 'flex-row'}`}>\r\n                                                <div className=\"flex-shrink-0 h-8 w-8 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden mx-2 border border-white/10\">\r\n                                                    {msg.sender_photo ? (\r\n                                                        <img src={msg.sender_photo} alt={msg.sender_name} className=\"h-full w-full object-cover\" />\r\n                                                    ) : (\r\n                                                        <User className=\"h-5 w-5 text-gray-400\" />\r\n                                                    )}\r\n                                                </div>\r\n                                                <div>\r\n                                                    {!isMe && <p className=\"text-xs text-gray-500 ml-1 mb-1\">{msg.sender_name}</p>}\r\n                                                    <div className={`rounded-2xl px-4 py-2 shadow-sm ${isMe ? 'bg-primary text-white rounded-tr-none' : 'bg-dark-surface border border-white/10 text-gray-300 rounded-tl-none'}`}>\r\n                                                        {msg.image_url && (\r\n                                                            <img src={msg.image_url} alt=\"Shared\" className=\"max-w-full rounded mb-2\" />\r\n                                                        )}\r\n                                                        <p className=\"text-sm\">{msg.content}</p>\r\n                                                    </div>\r\n                                                    <div className={`flex items-center mt-1 ${isMe ? 'justify-end' : 'justify-start'}`}>\r\n                                                        <p className=\"text-[10px] text-gray-500\">\r\n                                                            {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                                            {msg.is_edited && <span className=\"ml-1 italic\">(edited)</span>}\r\n                                                        </p>\r\n                                                        {isMe && (new Date() - new Date(msg.created_at) < 10 * 60 * 1000) && (\r\n                                                            <button\r\n                                                                onClick={() => startEditing(msg)}\r\n                                                                className=\"ml-2 text-gray-500 hover:text-white text-[10px] underline\"\r\n                                                            >\r\n                                                                Edit\r\n                                                            </button>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            )}\r\n                            <div ref={messagesEndRef} />\r\n                        </div>\r\n\r\n                        {/* Input */}\r\n                        <div className=\"bg-dark-surface border-t border-white/5 p-4\">\r\n                            {editingMessage ? (\r\n                                <form onSubmit={handleEdit} className=\"flex gap-2 max-w-4xl mx-auto items-center\">\r\n                                    <span className=\"text-xs text-primary whitespace-nowrap\">Editing...</span>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={editContent}\r\n                                        onChange={(e) => setEditContent(e.target.value)}\r\n                                        className=\"flex-1 bg-dark border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary\"\r\n                                        autoFocus\r\n                                    />\r\n                                    <button type=\"submit\" className=\"text-primary hover:text-white text-sm\">Save</button>\r\n                                    <button type=\"button\" onClick={() => setEditingMessage(null)} className=\"text-gray-500 hover:text-white text-sm\">Cancel</button>\r\n                                </form>\r\n                            ) : (\r\n                                <form onSubmit={handleSend} className=\"flex gap-2 max-w-4xl mx-auto items-center\">\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        ref={fileInputRef}\r\n                                        onChange={handleImageUpload}\r\n                                        className=\"hidden\"\r\n                                        accept=\"image/*\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => fileInputRef.current?.click()}\r\n                                        className={`p-2 rounded-full transition-colors ${isPremium ? 'text-gray-400 hover:text-white hover:bg-white/5' : 'text-gray-600 cursor-not-allowed'}`}\r\n                                        title={isPremium ? \"Send Image\" : \"Premium feature\"}\r\n                                    >\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                                        </svg>\r\n                                    </button>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newMessage}\r\n                                        onChange={(e) => setNewMessage(e.target.value)}\r\n                                        placeholder=\"Type a message...\"\r\n                                        className=\"flex-1 bg-dark border border-white/10 rounded-full px-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\"\r\n                                    />\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        disabled={!newMessage.trim()}\r\n                                        className=\"bg-primary text-white rounded-full p-2 hover:bg-primary-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg shadow-primary/20\"\r\n                                    >\r\n                                        <Send className=\"h-5 w-5\" />\r\n                                    </button>\r\n                                </form>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    <div className=\"flex-1 flex items-center justify-center text-gray-500\">\r\n                        Select a project to start chatting\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Members Modal */}\r\n            {showMembersModal && (\r\n                <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n                    <div className=\"bg-dark-surface rounded-xl max-w-md w-full p-6 shadow-2xl border border-white/10\">\r\n                        <div className=\"flex justify-between items-center mb-4\">\r\n                            <h3 className=\"text-lg font-bold text-white\">Project Members</h3>\r\n                            <button onClick={() => setShowMembersModal(false)} className=\"text-gray-400 hover:text-white\">\r\n                                <span className=\"sr-only\">Close</span>\r\n                                <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n                            {members.map(member => (\r\n                                <div key={member.user_id} className=\"flex items-center justify-between p-2 hover:bg-white/5 rounded-lg transition-colors\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <div className=\"h-10 w-10 rounded-full bg-gray-700 flex items-center justify-center overflow-hidden mr-3 border border-white/10\">\r\n                                            {member.photo_url ? (\r\n                                                <img src={member.photo_url} alt={member.username} className=\"h-full w-full object-cover\" />\r\n                                            ) : (\r\n                                                <User className=\"h-5 w-5 text-gray-400\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-medium text-gray-200\">{member.username}</p>\r\n                                            <p className=\"text-xs text-gray-500\">{member.role}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    {isOwner && member.user_id !== currentUser.id && (\r\n                                        <button\r\n                                            onClick={() => handleRemoveMember(member.user_id)}\r\n                                            className=\"text-red-400 hover:text-red-300 p-2 rounded-full hover:bg-red-500/10 transition-colors\"\r\n                                            title=\"Remove Member\"\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\pages\\CreateProject.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\pages\\Dashboard.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'loadRazorpay' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"loadRazorpay"},"fix":{"range":[301,647],"text":""},"desc":"Remove unused variable 'loadRazorpay'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { BarChart, Users, ThumbsUp, MessageSquare, Check, X, TrendingUp, Lock, Zap, Trash2 } from 'lucide-react';\r\nimport { api } from '../api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst loadRazorpay = () => {\r\n    return new Promise((resolve) => {\r\n        const script = document.createElement('script');\r\n        script.src = 'https://checkout.razorpay.com/v1/checkout.js';\r\n        script.onload = () => resolve(true);\r\n        script.onerror = () => resolve(false);\r\n        document.body.appendChild(script);\r\n    });\r\n};\r\n\r\nexport default function Dashboard() {\r\n    const navigate = useNavigate();\r\n    const { currentUser } = useAuth();\r\n    const [activeTab, setActiveTab] = useState('projects');\r\n    const [isPremium, setIsPremium] = useState(false);\r\n    const [showPremiumModal, setShowPremiumModal] = useState(false);\r\n    const [editingProject, setEditingProject] = useState(null);\r\n    const [editFormData, setEditFormData] = useState({});\r\n    const [myProjects, setMyProjects] = useState([]);\r\n    const [requests, setRequests] = useState([]);\r\n    const [notifications, setNotifications] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [aiAnalysis, setAiAnalysis] = useState(null);\r\n    const [loadingAi, setLoadingAi] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [user, projectsData, requestsData, notificationsData] = await Promise.all([\r\n                    api.auth.me(),\r\n                    api.projects.getMyProjects(),\r\n                    api.requests.getMyProjectRequests(),\r\n                    api.notifications.getAll()\r\n                ]);\r\n                setIsPremium(user.is_premium);\r\n                setMyProjects(projectsData);\r\n                setRequests(requestsData);\r\n                setNotifications(notificationsData);\r\n\r\n                if (user.is_premium) {\r\n                    fetchAiAnalysis();\r\n                }\r\n            } catch (err) {\r\n                console.error('Failed to fetch dashboard data:', err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchAiAnalysis = async () => {\r\n        setLoadingAi(true);\r\n        try {\r\n            const data = await api.ai.getAnalysis();\r\n            setAiAnalysis(data);\r\n        } catch (err) {\r\n            console.error('Failed to fetch AI analysis:', err);\r\n        } finally {\r\n            setLoadingAi(false);\r\n        }\r\n    };\r\n\r\n    const handleUpgrade = () => {\r\n        window.open('https://rzp.io/rzp/CmYvunI', '_blank');\r\n    };\r\n\r\n    const handleRequestStatus = async (requestId, status) => {\r\n        try {\r\n            await api.requests.updateStatus(requestId, status);\r\n            // Update local state\r\n            setRequests(requests.map(req =>\r\n                req.id === requestId ? { ...req, status } : req\r\n            ));\r\n        } catch (error) {\r\n            console.error('Failed to update status:', error);\r\n            alert('Failed to update request status');\r\n        }\r\n    };\r\n\r\n    const handleDeleteRequest = async (requestId) => {\r\n        if (!confirm('Are you sure you want to delete this request?')) return;\r\n        try {\r\n            await api.requests.delete(requestId);\r\n            setRequests(requests.filter(r => r.id !== requestId));\r\n        } catch (error) {\r\n            console.error('Failed to delete request:', error);\r\n            alert('Failed to delete request');\r\n        }\r\n    };\r\n\r\n    const handleEditClick = (project) => {\r\n        setEditingProject(project);\r\n        setEditFormData({\r\n            title: project.title,\r\n            description: project.description,\r\n            category: project.category,\r\n            status: project.status,\r\n            lookingFor: project.looking_for,\r\n            memberLimit: project.member_limit\r\n        });\r\n    };\r\n\r\n    const handleEditChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setEditFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleEditSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const updated = await api.projects.update(editingProject.id, editFormData);\r\n            setMyProjects(prev => prev.map(p => p.id === updated.id ? updated : p));\r\n            setEditingProject(null);\r\n            alert('Project updated successfully!');\r\n        } catch (error) {\r\n            console.error('Failed to update project:', error);\r\n            alert(error.message || 'Failed to update project');\r\n        }\r\n    };\r\n\r\n    const handleDeleteNotification = async (id) => {\r\n        try {\r\n            await api.notifications.delete(id);\r\n            setNotifications(notifications.filter(n => n.id !== id));\r\n        } catch (error) {\r\n            console.error('Failed to delete notification:', error);\r\n        }\r\n    };\r\n\r\n    const pendingRequests = requests.filter(r => r.status === 'pending');\r\n\r\n    if (loading) return <div className=\"text-center py-20\">Loading dashboard...</div>;\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n            <div className=\"flex justify-between items-center mb-8\">\r\n                <h1 className=\"text-3xl font-bold text-white\">\r\n                    {currentUser ? `${currentUser.username}'s Dashboard` : 'Dashboard'}\r\n                </h1>\r\n                {!isPremium && (\r\n                    <button\r\n                        onClick={() => setShowPremiumModal(true)}\r\n                        className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-secondary to-primary hover:shadow-lg hover:shadow-primary/25 transition-all shadow-md\"\r\n                    >\r\n                        Upgrade to Premium\r\n                    </button>\r\n                )}\r\n                {isPremium && (\r\n                    <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-secondary/10 text-secondary border border-secondary/20\">\r\n                        <Zap className=\"h-4 w-4 mr-1 fill-current\" /> Premium Member\r\n                    </span>\r\n                )}\r\n            </div>\r\n\r\n            {/* Analytics Overview */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                <div className=\"bg-[#13161f] p-6 rounded-lg shadow-lg border border-white/5\">\r\n                    <div className=\"flex items-center\">\r\n                        <div className=\"p-3 rounded-full bg-primary/10 text-primary\">\r\n                            <ThumbsUp className=\"h-6 w-6\" />\r\n                        </div>\r\n                        <div className=\"ml-4\">\r\n                            <p className=\"text-sm font-medium text-gray-400\">Total Likes</p>\r\n                            <p className=\"text-2xl font-semibold text-white\">\r\n                                {myProjects.reduce((acc, curr) => acc + (curr.likes || 0), 0)}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-[#13161f] p-6 rounded-lg shadow-lg border border-white/5\">\r\n                    <div className=\"flex items-center\">\r\n                        <div className=\"p-3 rounded-full bg-green-500/10 text-green-400\">\r\n                            <MessageSquare className=\"h-6 w-6\" />\r\n                        </div>\r\n                        <div className=\"ml-4\">\r\n                            <p className=\"text-sm font-medium text-gray-400\">Total Comments</p>\r\n                            <p className=\"text-2xl font-semibold text-white\">\r\n                                {myProjects.reduce((acc, curr) => acc + parseInt(curr.comments_count || 0), 0)}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-[#13161f] p-6 rounded-lg shadow-lg border border-white/5\">\r\n                    <div className=\"flex items-center\">\r\n                        <div className=\"p-3 rounded-full bg-amber-500/10 text-amber-400\">\r\n                            <Users className=\"h-6 w-6\" />\r\n                        </div>\r\n                        <div className=\"ml-4\">\r\n                            <p className=\"text-sm font-medium text-gray-400\">Pending Requests</p>\r\n                            <p className=\"text-2xl font-semibold text-white\">{pendingRequests.length}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Advanced Insights (Premium Only) */}\r\n            <div className=\"mb-8 bg-[#13161f] p-6 rounded-lg shadow-lg border border-white/5 relative overflow-hidden\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <h2 className=\"text-lg font-semibold text-white flex items-center\">\r\n                        <TrendingUp className=\"h-5 w-5 mr-2 text-primary\" /> AI Advanced Insights\r\n                    </h2>\r\n                    {!isPremium && <Lock className=\"h-5 w-5 text-gray-500\" />}\r\n                </div>\r\n\r\n                {isPremium && aiAnalysis ? (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            <div>\r\n                                <h3 className=\"text-sm font-medium text-gray-400 mb-2\">Project Growth Trend</h3>\r\n                                <div className=\"h-40 flex items-end justify-between space-x-2 px-2 bg-dark rounded p-4 border border-white/5\">\r\n                                    {aiAnalysis.projectGrowth.map((h, i) => (\r\n                                        <div key={i} className=\"w-full bg-primary rounded-t-sm relative group\" style={{ height: `${h * 5}%` }}>\r\n                                            <div className=\"opacity-0 group-hover:opacity-100 absolute -top-8 left-1/2 transform -translate-x-1/2 bg-white text-dark text-xs py-1 px-2 rounded z-10 font-bold\">\r\n                                                {h} new views\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <h3 className=\"text-sm font-medium text-gray-400 mb-2\">Audience Demographics</h3>\r\n                                <div className=\"space-y-3 bg-dark rounded p-4 border border-white/5\">\r\n                                    {Object.entries(aiAnalysis.audienceDemographics).map(([role, percent]) => (\r\n                                        <div key={role}>\r\n                                            <div className=\"flex justify-between text-xs mb-1 text-gray-300\">\r\n                                                <span>{role}</span>\r\n                                                <span>{percent}%</span>\r\n                                            </div>\r\n                                            <div className=\"w-full bg-white/10 rounded-full h-2\">\r\n                                                <div className=\"bg-secondary h-2 rounded-full\" style={{ width: `${percent}%` }}></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-sm font-medium text-gray-400 mb-2\">AI Suggestions</h3>\r\n                            <ul className=\"space-y-2\">\r\n                                {aiAnalysis.suggestions.map((suggestion, idx) => (\r\n                                    <li key={idx} className=\"flex items-start text-sm text-gray-300 bg-primary/5 p-3 rounded-md border border-primary/10\">\r\n                                        <Zap className=\"h-4 w-4 text-amber-400 mr-2 mt-0.5 flex-shrink-0\" />\r\n                                        {suggestion}\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                ) : isPremium && loadingAi ? (\r\n                    <div className=\"text-center py-10 text-gray-400\">Generating AI Analysis...</div>\r\n                ) : (\r\n                    <div className=\"absolute inset-0 bg-dark/60 backdrop-blur-sm flex flex-col items-center justify-center z-10\">\r\n                        <p className=\"text-gray-300 mb-4 font-medium\">Unlock detailed growth charts and AI-powered suggestions.</p>\r\n                        <button\r\n                            onClick={() => setShowPremiumModal(true)}\r\n                            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-primary-hover\"\r\n                        >\r\n                            Upgrade to Premium\r\n                        </button>\r\n                    </div>\r\n                )}\r\n                {/* Background placeholder for non-premium */}\r\n                {!isPremium && (\r\n                    <div className=\"h-64 flex items-end justify-between space-x-2 px-4 opacity-10\">\r\n                        {[30, 45, 35, 60, 55, 70, 85].map((h, i) => (\r\n                            <div key={i} className=\"w-full bg-gray-500 rounded-t-sm\" style={{ height: `${h}%` }}></div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"border-b border-white/10 mb-6\">\r\n                <nav className=\"-mb-px flex space-x-8\">\r\n                    <button\r\n                        onClick={() => setActiveTab('projects')}\r\n                        className={`${activeTab === 'projects' ? 'border-primary text-primary' : 'border-transparent text-gray-400 hover:text-white hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`}\r\n                    >\r\n                        My Projects\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('inbox')}\r\n                        className={`${activeTab === 'inbox' ? 'border-primary text-primary' : 'border-transparent text-gray-400 hover:text-white hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors`}\r\n                    >\r\n                        Inbox <span className=\"ml-2 bg-red-500/20 text-red-400 py-0.5 px-2 rounded-full text-xs border border-red-500/20\">{pendingRequests.length + notifications.length}</span>\r\n                    </button>\r\n                </nav>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            {activeTab === 'projects' ? (\r\n                <div className=\"bg-[#13161f] shadow-lg overflow-hidden sm:rounded-md border border-white/5\">\r\n                    <ul className=\"divide-y divide-white/5\">\r\n                        {myProjects.length > 0 ? myProjects.map((project) => (\r\n                            <li key={project.id}>\r\n                                <div className=\"px-4 py-4 sm:px-6 hover:bg-white/5 transition-colors\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <p className=\"text-sm font-medium text-primary truncate\">{project.title}</p>\r\n                                        <div className=\"ml-2 flex-shrink-0 flex\">\r\n                                            <p className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-500/10 text-green-400 border border-green-500/20\">\r\n                                                {project.status}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"mt-2 sm:flex sm:justify-between\">\r\n                                        <div className=\"sm:flex\">\r\n                                            <p className=\"flex items-center text-sm text-gray-400\">\r\n                                                <ThumbsUp className=\"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-500\" />\r\n                                                {project.likes} Likes\r\n                                            </p>\r\n                                            <p className=\"mt-2 flex items-center text-sm text-gray-400 sm:mt-0 sm:ml-6\">\r\n                                                <Users className=\"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-500\" />\r\n                                                {project.impressions} Impressions\r\n                                            </p>\r\n                                            <p className=\"mt-2 flex items-center text-sm text-gray-400 sm:mt-0 sm:ml-6\">\r\n                                                <Users className=\"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-500\" />\r\n                                                {project.impressions} Impressions\r\n                                            </p>\r\n                                        </div>\r\n                                        <div className=\"mt-2 sm:mt-0\">\r\n                                            <button\r\n                                                onClick={(e) => { e.stopPropagation(); handleEditClick(project); }}\r\n                                                className=\"text-sm text-primary hover:text-white underline\"\r\n                                            >\r\n                                                Edit\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        )) : (\r\n                            <div className=\"p-6 text-center text-gray-500\">\r\n                                You haven't created any projects yet.\r\n                            </div>\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    {requests.length > 0 ? requests.map((request) => (\r\n                        <div key={request.id} className=\"bg-[#13161f] shadow-lg sm:rounded-lg p-6 border border-white/5\">\r\n                            <div className=\"flex justify-between items-start\">\r\n                                <div>\r\n                                    <h3 className=\"text-lg leading-6 font-medium text-white\">\r\n                                        {request.user_name} <span className=\"text-gray-500 text-sm font-normal\">wants to join</span> {request.project_title}\r\n                                    </h3>\r\n                                    <p className=\"mt-1 text-sm text-gray-400\">Role: {request.role}</p>\r\n                                    <div className=\"mt-3 text-sm text-gray-300 bg-white/5 p-3 rounded border border-white/10\">\r\n                                        \"{request.note}\"\r\n                                    </div>\r\n                                    <div className=\"mt-2\">\r\n                                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${request.status === 'accepted' ? 'bg-green-500/10 text-green-400 border border-green-500/20' :\r\n                                            request.status === 'rejected' ? 'bg-red-500/10 text-red-400 border border-red-500/20' :\r\n                                                'bg-yellow-500/10 text-yellow-400 border border-yellow-500/20'\r\n                                            }`}>\r\n                                            {request.status ? request.status.charAt(0).toUpperCase() + request.status.slice(1) : 'Pending'}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex space-x-2\">\r\n                                    {request.status === 'pending' && (\r\n                                        <>\r\n                                            <button\r\n                                                onClick={() => handleRequestStatus(request.id, 'accepted')}\r\n                                                className=\"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\r\n                                                title=\"Accept\"\r\n                                            >\r\n                                                <Check className=\"h-5 w-5\" />\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleRequestStatus(request.id, 'rejected')}\r\n                                                className=\"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\r\n                                                title=\"Reject\"\r\n                                            >\r\n                                                <X className=\"h-5 w-5\" />\r\n                                            </button>\r\n                                        </>\r\n                                    )}\r\n                                    {request.status === 'accepted' && (\r\n                                        <button\r\n                                            onClick={() => navigate(`/chat/${request.project_id}`)}\r\n                                            className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary\"\r\n                                        >\r\n                                            <MessageSquare className=\"h-4 w-4 mr-2\" /> Chat\r\n                                        </button>\r\n                                    )}\r\n                                    <button\r\n                                        onClick={() => handleDeleteRequest(request.id)}\r\n                                        className=\"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none\"\r\n                                        title=\"Delete Request\"\r\n                                    >\r\n                                        <Trash2 className=\"h-4 w-4 mr-2\" /> Delete\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )) : (\r\n                        <div className=\"p-6 text-center text-gray-500 bg-[#13161f] rounded-lg shadow border border-white/5\">\r\n                            No pending requests.\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Notifications Section */}\r\n                    <h3 className=\"text-lg font-bold text-white mt-8 mb-4\">Notifications</h3>\r\n                    {notifications.length > 0 ? (\r\n                        <div className=\"space-y-4\">\r\n                            {notifications.map((notification) => (\r\n                                <div key={notification.id} className=\"bg-[#13161f] shadow-lg sm:rounded-lg p-6 border border-white/5 flex justify-between items-center\">\r\n                                    <div>\r\n                                        <p className=\"text-gray-300\">{notification.content}</p>\r\n                                        <p className=\"text-xs text-gray-500 mt-1\">{new Date(notification.created_at).toLocaleDateString()}</p>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={() => handleDeleteNotification(notification.id)}\r\n                                        className=\"inline-flex items-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none\"\r\n                                        title=\"Delete Notification\"\r\n                                    >\r\n                                        <Trash2 className=\"h-4 w-4 mr-2\" /> Delete\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"p-6 text-center text-gray-500 bg-[#13161f] rounded-lg shadow border border-white/5\">\r\n                            No new notifications.\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Premium Modal */}\r\n            {showPremiumModal && (\r\n                <div className=\"fixed inset-0 z-50 overflow-y-auto\" aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\r\n                    <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n                        <div className=\"fixed inset-0 bg-dark/80 backdrop-blur-sm transition-opacity\" aria-hidden=\"true\" onClick={() => setShowPremiumModal(false)}></div>\r\n                        <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">&#8203;</span>\r\n                        <div className=\"inline-block align-bottom bg-[#13161f] rounded-xl px-4 pt-5 pb-4 text-left overflow-hidden shadow-2xl border border-white/10 transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\">\r\n                            <div className=\"absolute top-0 right-0 pt-4 pr-4\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"bg-transparent rounded-md text-gray-400 hover:text-white focus:outline-none\"\r\n                                    onClick={() => setShowPremiumModal(false)}\r\n                                >\r\n                                    <span className=\"sr-only\">Close</span>\r\n                                    <X className=\"h-6 w-6\" />\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"sm:flex sm:items-start\">\r\n                            </div>\r\n                            <div className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-gradient-to-r from-secondary to-primary text-base font-medium text-white hover:shadow-lg hover:shadow-primary/25 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:ml-3 sm:w-auto sm:text-sm\"\r\n                                    onClick={handleUpgrade}\r\n                                >\r\n                                    Upgrade Now (1)\r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"mt-3 w-full inline-flex justify-center rounded-md border border-white/10 shadow-sm px-4 py-2 bg-transparent text-base font-medium text-gray-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:w-auto sm:text-sm\"\r\n                                    onClick={() => setShowPremiumModal(false)}\r\n                                >\r\n                                    Maybe Later\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Edit Project Modal */}\r\n            {editingProject && (\r\n                <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n                    <div className=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\r\n                        <div className=\"fixed inset-0 bg-dark/80 backdrop-blur-sm transition-opacity\" onClick={() => setEditingProject(null)}></div>\r\n                        <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\">&#8203;</span>\r\n                        <div className=\"inline-block align-bottom bg-[#13161f] rounded-xl px-4 pt-5 pb-4 text-left overflow-hidden shadow-2xl border border-white/10 transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6\">\r\n                            <h3 className=\"text-lg leading-6 font-bold text-white mb-4\">Edit Project</h3>\r\n                            <form onSubmit={handleEditSubmit} className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-300\">Title</label>\r\n                                    <input type=\"text\" name=\"title\" value={editFormData.title} onChange={handleEditChange} className=\"mt-1 block w-full bg-dark border border-white/10 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-300\">Description</label>\r\n                                    <textarea name=\"description\" rows=\"3\" value={editFormData.description} onChange={handleEditChange} className=\"mt-1 block w-full bg-dark border border-white/10 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm\"></textarea>\r\n                                </div>\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <label className=\"block text-sm font-medium text-gray-300\">Category</label>\r\n                                        <select name=\"category\" value={editFormData.category} onChange={handleEditChange} className=\"mt-1 block w-full bg-dark border border-white/10 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm\">\r\n                                            <option value=\"Tech\">Tech</option>\r\n                                            <option value=\"Social Impact\">Social Impact</option>\r\n                                            <option value=\"Art\">Art</option>\r\n                                            <option value=\"Education\">Education</option>\r\n                                            <option value=\"Business\">Business</option>\r\n                                            <option value=\"Other\">Other</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block text-sm font-medium text-gray-300\">Status</label>\r\n                                        <select name=\"status\" value={editFormData.status} onChange={handleEditChange} className=\"mt-1 block w-full bg-dark border border-white/10 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm\">\r\n                                            <option value=\"Idea\">Just an Idea</option>\r\n                                            <option value=\"Prototype\">Prototype Ready</option>\r\n                                            <option value=\"In Progress\">In Development</option>\r\n                                            <option value=\"Launched\">Launched</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-300\">Looking For</label>\r\n                                    <input type=\"text\" name=\"lookingFor\" value={editFormData.lookingFor} onChange={handleEditChange} className=\"mt-1 block w-full bg-dark border border-white/10 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-primary focus:border-primary sm:text-sm\" />\r\n                                </div>\r\n                                <div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\r\n                                    <button type=\"submit\" className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:col-start-2 sm:text-sm\">\r\n                                        Save Changes\r\n                                    </button>\r\n                                    <button type=\"button\" onClick={() => setEditingProject(null)} className=\"mt-3 w-full inline-flex justify-center rounded-md border border-white/10 shadow-sm px-4 py-2 bg-transparent text-base font-medium text-gray-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary sm:mt-0 sm:col-start-1 sm:text-sm\">\r\n                                        Cancel\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\pages\\Home.jsx","messages":[{"ruleId":"no-undef","severity":2,"message":"'handleSearch' is not defined.","line":132,"column":37,"nodeType":"Identifier","messageId":"undef","endLine":132,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { Search, Filter, TrendingUp, Star } from 'lucide-react';\r\nimport ProjectCard from '../components/ProjectCard';\r\nimport { api } from '../api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function Home() {\r\n    const { currentUser } = useAuth();\r\n    const [searchParams, setSearchParams] = useSearchParams();\r\n    const [projects, setProjects] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Initialize state from URL params\r\n    const [searchTerm, setSearchTerm] = useState(searchParams.get('q') || '');\r\n    const [filterCategory, setFilterCategory] = useState(searchParams.get('category') || 'All');\r\n\r\n    useEffect(() => {\r\n        const fetchProjects = async () => {\r\n            try {\r\n                const data = await api.projects.getAll();\r\n                // Map snake_case from DB to camelCase for components\r\n                const formattedData = data.map(p => ({\r\n                    ...p,\r\n                    lookingFor: p.looking_for || '',\r\n                    pollQuestion: p.poll_question,\r\n                    isFeatured: p.is_featured,\r\n                    isSponsored: p.is_sponsored\r\n                }));\r\n                setProjects(formattedData);\r\n            } catch (err) {\r\n                console.error('Failed to fetch projects:', err);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchProjects();\r\n    }, []);\r\n\r\n    // Sync local state with URL params when they change (e.g. back button)\r\n    useEffect(() => {\r\n        setSearchTerm(searchParams.get('q') || '');\r\n        setFilterCategory(searchParams.get('category') || 'All');\r\n    }, [searchParams]);\r\n\r\n    // Debounce search: Update URL params after 2 seconds of inactivity\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setSearchParams(prev => {\r\n                const newParams = new URLSearchParams(prev);\r\n                if (searchTerm) newParams.set('q', searchTerm);\r\n                else newParams.delete('q');\r\n\r\n                if (filterCategory && filterCategory !== 'All') newParams.set('category', filterCategory);\r\n                else newParams.delete('category');\r\n\r\n                return newParams;\r\n            });\r\n        }, 2000); // 2 seconds delay as requested\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [searchTerm, filterCategory, setSearchParams]);\r\n\r\n    // Handle immediate filter change (optional, but usually filters are immediate. User asked for search throttling)\r\n    // For now, I'll include category in the debounce to keep it consistent with the \"wait\" request, \r\n    // or I could separate them. I'll keep them together for simplicity.\r\n\r\n    /* \r\n    const handleSearch = (e) => {\r\n        e.preventDefault();\r\n        // Search is now handled by the debounce effect\r\n    }; \r\n    */\r\n\r\n    // Filter projects based on URL params (source of truth)\r\n    const currentSearch = searchParams.get('q') || '';\r\n    const currentCategory = searchParams.get('category') || 'All';\r\n\r\n    const filteredProjects = projects.filter(project => {\r\n        const matchesSearch = project.title.toLowerCase().includes(currentSearch.toLowerCase()) ||\r\n            project.description.toLowerCase().includes(currentSearch.toLowerCase());\r\n        const matchesCategory = currentCategory === 'All' || project.category === currentCategory;\r\n        return matchesSearch && matchesCategory;\r\n    });\r\n\r\n    // Simple logic for project of the month: most likes from FILTERED projects\r\n    const projectOfTheMonth = [...filteredProjects].sort((a, b) => b.likes - a.likes)[0];\r\n\r\n    if (loading) return <div className=\"text-center py-20\">Loading projects...</div>;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#0b0f19] bg-grid text-gray-100 font-sans selection:bg-primary/30\">\r\n            {/* Hero Section */}\r\n            <section className=\"relative pt-20 pb-32 overflow-hidden\">\r\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center\">\r\n                    <div className=\"inline-block mb-4\">\r\n                        <span className=\"py-1 px-3 rounded-full bg-primary/10 border border-primary/20 text-primary text-xs font-semibold tracking-wide uppercase\">\r\n                            Featured Platform\r\n                        </span>\r\n                    </div>\r\n                    <h1 className=\"text-5xl md:text-7xl font-bold tracking-tight text-white mb-6\">\r\n                        Find Your Next Project\r\n                    </h1>\r\n                    <p className=\"text-xl text-gray-400 max-w-2xl mx-auto mb-10 font-light\">\r\n                        Join the community of developers building the future.\r\n                    </p>\r\n\r\n                    {/* 3D Demo Placeholder */}\r\n                    <div className=\"relative max-w-4xl mx-auto mt-12\">\r\n                        <div className=\"absolute -inset-1 bg-gradient-to-r from-primary via-secondary to-accent rounded-2xl blur opacity-30 animate-pulse\"></div>\r\n                        <div className=\"relative bg-dark-surface rounded-2xl border border-white/10 aspect-video flex items-center justify-center overflow-hidden shadow-2xl\">\r\n                            <div className=\"text-center\">\r\n                                <div className=\"w-20 h-20 bg-gradient-to-br from-primary to-secondary rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg shadow-primary/20\">\r\n                                    <svg className=\"w-10 h-10 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" />\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <p className=\"text-gray-400 font-medium\">Watch the Demo</p>\r\n                            </div>\r\n                            {/* Grid overlay for video placeholder */}\r\n                            <div className=\"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-20 -mt-20 relative z-20\">\r\n                {/* Search Bar */}\r\n                <div className=\"max-w-3xl mx-auto mb-16\">\r\n                    <form onSubmit={handleSearch} className=\"bg-dark-surface border border-white/10 rounded-full p-2 flex shadow-xl shadow-black/50 backdrop-blur-xl\">\r\n                        <div className=\"flex-shrink-0 pl-4 pr-2 flex items-center border-r border-white/5\">\r\n                            <select\r\n                                value={filterCategory}\r\n                                onChange={(e) => setFilterCategory(e.target.value)}\r\n                                className=\"bg-transparent text-gray-300 text-sm font-medium focus:outline-none cursor-pointer hover:text-white transition-colors [&>option]:bg-[#13161f] [&>option]:text-gray-300\"\r\n                            >\r\n                                <option value=\"All\" className=\"bg-[#13161f]\">All Categories</option>\r\n                                <option value=\"Tech\" className=\"bg-[#13161f]\">Technology</option>\r\n                                <option value=\"Social Impact\" className=\"bg-[#13161f]\">Social Impact</option>\r\n                                <option value=\"Art\" className=\"bg-[#13161f]\">Art</option>\r\n                                <option value=\"Education\" className=\"bg-[#13161f]\">Education</option>\r\n                                <option value=\"Business\" className=\"bg-[#13161f]\">Business</option>\r\n                                <option value=\"Marketing\" className=\"bg-[#13161f]\">Marketing</option>\r\n                                <option value=\"Design\" className=\"bg-[#13161f]\">Design</option>\r\n                                <option value=\"Other\" className=\"bg-[#13161f]\">Other</option>\r\n                            </select>\r\n                        </div>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search for projects...\"\r\n                            className=\"flex-1 bg-transparent border-none px-4 text-white placeholder-gray-500 focus:ring-0\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                        <div className=\"px-4 py-3 text-gray-400\">\r\n                            {searchTerm ? 'Searching...' : <Search className=\"w-5 h-5\" />}\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* Featured Projects */}\r\n                <div className=\"mb-16\">\r\n                    <div className=\"flex items-center justify-between mb-8\">\r\n                        <h2 className=\"text-2xl font-bold text-white flex items-center gap-2\">\r\n                            <span className=\"w-1 h-8 bg-gradient-to-b from-primary to-secondary rounded-full\"></span>\r\n                            Featured Projects\r\n                        </h2>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                        {filteredProjects.filter(p => p.is_featured).map(project => (\r\n                            <ProjectCard key={project.id} project={project} isOwner={project.user_id === currentUser?.id} />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Project of the Month */}\r\n                {projectOfTheMonth && (\r\n                    <div className=\"mb-16\">\r\n                        <h2 className=\"text-2xl font-bold text-white mb-8 flex items-center gap-2\">\r\n                            <span className=\"w-1 h-8 bg-gradient-to-b from-accent to-primary rounded-full\"></span>\r\n                            Project of the Month\r\n                        </h2>\r\n                        <div className=\"bg-dark-surface rounded-2xl p-1 border border-white/10 shadow-2xl relative overflow-hidden group\">\r\n                            <div className=\"absolute inset-0 bg-gradient-to-r from-primary/5 to-secondary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\r\n                            <ProjectCard project={projectOfTheMonth} isSponsored={true} isOwner={projectOfTheMonth.user_id === currentUser?.id} />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* All Projects */}\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-white mb-8\">All Projects</h2>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                        {filteredProjects.filter(p => !p.is_featured && p.id !== projectOfTheMonth?.id).map(project => (\r\n                            <ProjectCard key={project.id} project={project} isOwner={project.user_id === currentUser?.id} />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\pages\\Login.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\pages\\Policies.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ayush\\OneDrive\\Desktop\\project1\\src\\pages\\Profile.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'login' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":7,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"login"},"fix":{"range":[301,308],"text":""},"desc":"Remove unused variable 'login'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { User, Award, Briefcase, X, Plus, Search, Check } from 'lucide-react';\r\nimport skillsData from '../data/skills.json';\r\n\r\nexport default function Profile() {\r\n    const { currentUser, login } = useAuth();\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [bio, setBio] = useState('');\r\n    const [selectedSkills, setSelectedSkills] = useState([]);\r\n    const [photoUrl, setPhotoUrl] = useState('');\r\n    const [backgroundUrl, setBackgroundUrl] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Skills Selector State\r\n    const [skillSearch, setSkillSearch] = useState('');\r\n    const [showSkillDropdown, setShowSkillDropdown] = useState(false);\r\n    const dropdownRef = useRef(null);\r\n\r\n    // Combine all skills for search\r\n    const allSkills = [...skillsData.tech, ...skillsData.non_tech];\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            setBio(currentUser.bio || '');\r\n            // Parse skills string back to array if needed, or handle as comma-separated string\r\n            const userSkills = currentUser.skills ? currentUser.skills.split(',').map(s => s.trim()).filter(Boolean) : [];\r\n            setSelectedSkills(userSkills);\r\n            setPhotoUrl(currentUser.photo_url || '');\r\n            setBackgroundUrl(currentUser.background_url || '');\r\n        }\r\n    }, [currentUser]);\r\n\r\n    // Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        function handleClickOutside(event) {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n                setShowSkillDropdown(false);\r\n            }\r\n        }\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }, []);\r\n\r\n    if (!currentUser) {\r\n        return (\r\n            <div className=\"container mx-auto px-4 py-8 text-center\">\r\n                <p className=\"text-gray-500\">Please log in to view your profile.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleImageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            if (file.size > 5 * 1024 * 1024) { // 5MB limit\r\n                alert('File size exceeds 5MB limit.');\r\n                return;\r\n            }\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setPhotoUrl(reader.result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleBackgroundUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            if (file.size > 5 * 1024 * 1024) { // 5MB limit\r\n                alert('File size exceeds 5MB limit.');\r\n                return;\r\n            }\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setBackgroundUrl(reader.result);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const addSkill = (skill) => {\r\n        if (!selectedSkills.includes(skill)) {\r\n            setSelectedSkills([...selectedSkills, skill]);\r\n        }\r\n        setSkillSearch('');\r\n        setShowSkillDropdown(false);\r\n    };\r\n\r\n    const removeSkill = (skillToRemove) => {\r\n        setSelectedSkills(selectedSkills.filter(skill => skill !== skillToRemove));\r\n    };\r\n\r\n    const filteredSkills = allSkills.filter(skill =>\r\n        skill.toLowerCase().includes(skillSearch.toLowerCase()) &&\r\n        !selectedSkills.includes(skill)\r\n    );\r\n\r\n    const handleSave = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const { api } = await import('../api');\r\n            // Join skills array back to string for storage\r\n            const skillsString = selectedSkills.join(', ');\r\n\r\n            await api.auth.updateProfile({\r\n                bio,\r\n                skills: skillsString,\r\n                photo_url: photoUrl,\r\n                background_url: backgroundUrl\r\n            });\r\n\r\n            // Force reload to update context and UI\r\n            window.location.reload();\r\n        } catch (error) {\r\n            console.error('Failed to update profile:', error);\r\n            alert('Failed to update profile. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n            setIsEditing(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\r\n            <div className=\"bg-dark-surface shadow-xl rounded-lg overflow-hidden border border-white/10\">\r\n                <div\r\n                    className=\"h-32 bg-cover bg-center relative\"\r\n                    style={{\r\n                        backgroundImage: backgroundUrl ? `url(${backgroundUrl})` : 'none',\r\n                        backgroundColor: backgroundUrl ? 'transparent' : '#4f46e5' // indigo-600\r\n                    }}\r\n                >\r\n                    {isEditing && (\r\n                        <div className=\"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center\">\r\n                            <label className=\"cursor-pointer bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-md transition-colors backdrop-blur-sm border border-white/20\">\r\n                                <span>Change Cover</span>\r\n                                <input\r\n                                    type=\"file\"\r\n                                    accept=\"image/*\"\r\n                                    onChange={handleBackgroundUpload}\r\n                                    className=\"hidden\"\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <div className=\"px-4 py-5 sm:px-6 relative\">\r\n                    <div className=\"-mt-16 mb-4\">\r\n                        {photoUrl ? (\r\n                            <img\r\n                                className=\"h-24 w-24 rounded-full border-4 border-dark-surface shadow-md inline-block object-cover bg-dark\"\r\n                                src={photoUrl}\r\n                                alt={currentUser.username}\r\n                            />\r\n                        ) : (\r\n                            <div className=\"h-24 w-24 rounded-full border-4 border-dark-surface shadow-md bg-dark flex items-center justify-center inline-block\">\r\n                                <User className=\"h-12 w-12 text-gray-400\" />\r\n                            </div>\r\n                        )}\r\n                        {isEditing && (\r\n                            <div className=\"mt-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-300 mb-1\">Change Photo</label>\r\n                                <input\r\n                                    type=\"file\"\r\n                                    accept=\"image/*\"\r\n                                    onChange={handleImageUpload}\r\n                                    className=\"block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20\"\r\n                                />\r\n                                <p className=\"text-xs text-gray-500 mt-1\">Max 5MB</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-between items-start\">\r\n                        <div>\r\n                            <h3 className=\"text-2xl font-bold leading-6 text-white\">\r\n                                {currentUser.username}\r\n                            </h3>\r\n                            <p className=\"mt-1 max-w-2xl text-sm text-gray-400\">\r\n                                {currentUser.email}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <span className=\"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-primary/10 text-primary h-fit border border-primary/20\">\r\n                                {currentUser.is_premium ? 'Premium Plan' : 'Free Plan'}\r\n                            </span>\r\n                            <button\r\n                                onClick={() => isEditing ? handleSave() : setIsEditing(true)}\r\n                                className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none transition-colors\"\r\n                                disabled={loading}\r\n                            >\r\n                                {loading ? 'Saving...' : (isEditing ? 'Save Profile' : 'Edit Profile')}\r\n                            </button>\r\n                            {isEditing && (\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setIsEditing(false);\r\n                                        // Reset state\r\n                                        setBio(currentUser.bio || '');\r\n                                        setSelectedSkills(currentUser.skills ? currentUser.skills.split(',').map(s => s.trim()).filter(Boolean) : []);\r\n                                        setPhotoUrl(currentUser.photo_url || '');\r\n                                        setBackgroundUrl(currentUser.background_url || '');\r\n                                    }}\r\n                                    className=\"inline-flex items-center px-4 py-2 border border-white/10 text-sm font-medium rounded-md shadow-sm text-gray-300 bg-transparent hover:bg-white/5 focus:outline-none transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"border-t border-white/5 px-4 py-5 sm:px-6\">\r\n                    <dl className=\"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2\">\r\n                        <div className=\"sm:col-span-2\">\r\n                            <dt className=\"text-sm font-medium text-gray-400 flex items-center gap-2 mb-2\">\r\n                                <Briefcase className=\"h-4 w-4\" /> Bio\r\n                            </dt>\r\n                            <dd className=\"mt-1 text-sm text-gray-200\">\r\n                                {isEditing ? (\r\n                                    <textarea\r\n                                        rows={4}\r\n                                        className=\"shadow-sm focus:ring-primary focus:border-primary block w-full sm:text-sm bg-dark border-white/10 rounded-md border p-3 text-white placeholder-gray-500\"\r\n                                        value={bio}\r\n                                        onChange={(e) => setBio(e.target.value)}\r\n                                        placeholder=\"Tell us about yourself...\"\r\n                                    />\r\n                                ) : (\r\n                                    <p className=\"whitespace-pre-wrap\">{bio || <span className=\"text-gray-500 italic\">No bio added yet.</span>}</p>\r\n                                )}\r\n                            </dd>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                            <dt className=\"text-sm font-medium text-gray-400 flex items-center gap-2 mb-2\">\r\n                                <Award className=\"h-4 w-4\" /> Skills\r\n                            </dt>\r\n                            <dd className=\"mt-1 text-sm text-gray-200\">\r\n                                {isEditing ? (\r\n                                    <div className=\"space-y-3\">\r\n                                        <div className=\"flex flex-wrap gap-2 mb-2\">\r\n                                            {selectedSkills.map(skill => (\r\n                                                <span key={skill} className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium bg-primary/10 text-primary border border-primary/20\">\r\n                                                    {skill}\r\n                                                    <button\r\n                                                        onClick={() => removeSkill(skill)}\r\n                                                        className=\"ml-1.5 inline-flex items-center justify-center text-primary hover:text-white focus:outline-none\"\r\n                                                    >\r\n                                                        <X className=\"h-3 w-3\" />\r\n                                                    </button>\r\n                                                </span>\r\n                                            ))}\r\n                                        </div>\r\n\r\n                                        <div className=\"relative\" ref={dropdownRef}>\r\n                                            <div className=\"relative rounded-md shadow-sm\">\r\n                                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                                                    <Search className=\"h-4 w-4 text-gray-500\" />\r\n                                                </div>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    className=\"focus:ring-primary focus:border-primary block w-full pl-10 sm:text-sm bg-dark border-white/10 rounded-md border p-2 text-white placeholder-gray-500\"\r\n                                                    placeholder=\"Search skills (e.g. React, Design)...\"\r\n                                                    value={skillSearch}\r\n                                                    onChange={(e) => {\r\n                                                        setSkillSearch(e.target.value);\r\n                                                        setShowSkillDropdown(true);\r\n                                                    }}\r\n                                                    onFocus={() => setShowSkillDropdown(true)}\r\n                                                />\r\n                                            </div>\r\n\r\n                                            {showSkillDropdown && (\r\n                                                <div className=\"absolute z-10 mt-1 w-full bg-dark-surface shadow-xl max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm border border-white/10\">\r\n                                                    {filteredSkills.length > 0 ? (\r\n                                                        filteredSkills.map((skill) => (\r\n                                                            <div\r\n                                                                key={skill}\r\n                                                                className=\"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-white/5 text-gray-200\"\r\n                                                                onClick={() => addSkill(skill)}\r\n                                                            >\r\n                                                                <span className=\"block truncate\">{skill}</span>\r\n                                                            </div>\r\n                                                        ))\r\n                                                    ) : (\r\n                                                        <div className=\"cursor-default select-none relative py-2 pl-3 pr-9 text-gray-500\">\r\n                                                            No matching skills found.\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                        <p className=\"text-xs text-gray-500\">Select from the list to add skills.</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {selectedSkills.length > 0 ? selectedSkills.map((skill) => (\r\n                                            <span key={skill} className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary border border-primary/20\">\r\n                                                {skill}\r\n                                            </span>\r\n                                        )) : <span className=\"text-gray-500 italic\">No skills added yet.</span>}\r\n                                    </div>\r\n                                )}\r\n                            </dd>\r\n                        </div>\r\n                    </dl>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]}]